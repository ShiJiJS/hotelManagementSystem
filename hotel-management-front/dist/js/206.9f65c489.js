"use strict";(self["webpackChunkvue_hotel_management_project"]=self["webpackChunkvue_hotel_management_project"]||[]).push([[206],{9206:function(e,t,l){l.r(t),l.d(t,{default:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{staticStyle:{"font-size":"24px","margin-bottom":"12px"},attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("系统管理")]),t("el-breadcrumb-item",[e._v("会员管理")])],1),t("el-row",{staticStyle:{"margin-bottom":"12px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:10}},[t("el-input",{staticStyle:{"line-height":"36px"},attrs:{placeholder:"请输入会员编号"},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),t("el-col",{attrs:{span:10}},[t("el-input",{staticStyle:{"line-height":"36px"},attrs:{placeholder:"请输入会员名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.conditionQuery},slot:"append"})],1)],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addVipDialogVisible=!0}}},[e._v("添加会员")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.massDeletionDialogVisible=!0}}},[e._v("批量删除")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"编号",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t("el-table-column",{attrs:{prop:"gender",label:"性别",width:"90"}}),t("el-table-column",{attrs:{prop:"phoneNumber",label:"电话"}}),t("el-table-column",{attrs:{fixed:"right",prop:"mark",label:"积分",width:"180"}}),t("el-table-column",{attrs:{fixed:"right",prop:"level",label:"等级",width:"90"}}),t("el-table-column",{attrs:{fixed:"right",prop:"latestCheckInTime",label:"最后一次入住时间",width:"180"}}),t("el-table-column",{attrs:{fixed:"right",prop:"latestReserveTime",label:"最后一次预约时间",width:"180"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showEditDialog(l.row.id)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.showDeleteDialog(l.row.id)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:"添加会员",visible:e.addVipDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.addVipDialogVisible=t}}},[t("el-form",{ref:"addVipFormRef",attrs:{model:e.addVipForm,rules:e.VipRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.addVipForm.name,callback:function(t){e.$set(e.addVipForm,"name",t)},expression:"addVipForm.name"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-input",{model:{value:e.addVipForm.gender,callback:function(t){e.$set(e.addVipForm,"gender",t)},expression:"addVipForm.gender"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.addVipForm.password,callback:function(t){e.$set(e.addVipForm,"password",t)},expression:"addVipForm.password"}})],1),t("el-form-item",{attrs:{label:"电话号码",prop:"phoneNumber"}},[t("el-input",{model:{value:e.addVipForm.phoneNumber,callback:function(t){e.$set(e.addVipForm,"phoneNumber",t)},expression:"addVipForm.phoneNumber"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{model:{value:e.addVipForm.address,callback:function(t){e.$set(e.addVipForm,"address",t)},expression:"addVipForm.address"}})],1),t("el-form-item",{attrs:{label:"E-mail",prop:"email"}},[t("el-input",{model:{value:e.addVipForm.email,callback:function(t){e.$set(e.addVipForm,"email",t)},expression:"addVipForm.email"}})],1),t("el-form-item",{attrs:{label:"积分",prop:"mark"}},[t("el-input",{model:{value:e.addVipForm.mark,callback:function(t){e.$set(e.addVipForm,"mark",t)},expression:"addVipForm.mark"}})],1),t("el-form-item",{attrs:{label:"等级",prop:"level"}},[t("el-select",{attrs:{placeholder:"请选择等级"},model:{value:e.addVipForm.level,callback:function(t){e.$set(e.addVipForm,"level",t)},expression:"addVipForm.level"}},[t("el-option",{attrs:{label:"普通",value:"普通"}}),t("el-option",{attrs:{label:"VIP",value:"VIP"}})],1)],1),t("el-form-item",{attrs:{label:"最后一次入住时间",prop:"latestCheckInTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.addVipForm.latestCheckInTime,callback:function(t){e.$set(e.addVipForm,"latestCheckInTime",t)},expression:"addVipForm.latestCheckInTime"}})],1),t("el-form-item",{attrs:{label:"最后一次预约时间",prop:"latestReserveTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.addVipForm.latestReserveTime,callback:function(t){e.$set(e.addVipForm,"latestReserveTime",t)},expression:"addVipForm.latestReserveTime"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.addVipForm.remark,callback:function(t){e.$set(e.addVipForm,"remark",t)},expression:"addVipForm.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addVipDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addVip}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改会员",visible:e.editVipDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editVipDialogVisible=t}}},[t("el-form",{ref:"editVipFormRef",attrs:{model:e.editVipForm,rules:e.VipRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"编号",prop:"id"}},[t("el-input",{model:{value:e.editVipForm.id,callback:function(t){e.$set(e.editVipForm,"id",t)},expression:"editVipForm.id"}})],1),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.editVipForm.name,callback:function(t){e.$set(e.editVipForm,"name",t)},expression:"editVipForm.name"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-input",{model:{value:e.editVipForm.gender,callback:function(t){e.$set(e.editVipForm,"gender",t)},expression:"editVipForm.gender"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{model:{value:e.editVipForm.password,callback:function(t){e.$set(e.editVipForm,"password",t)},expression:"editVipForm.password"}})],1),t("el-form-item",{attrs:{label:"电话号码",prop:"phoneNumber"}},[t("el-input",{model:{value:e.editVipForm.phoneNumber,callback:function(t){e.$set(e.editVipForm,"phoneNumber",t)},expression:"editVipForm.phoneNumber"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{model:{value:e.editVipForm.address,callback:function(t){e.$set(e.editVipForm,"address",t)},expression:"editVipForm.address"}})],1),t("el-form-item",{attrs:{label:"E-mail",prop:"email"}},[t("el-input",{model:{value:e.editVipForm.email,callback:function(t){e.$set(e.editVipForm,"email",t)},expression:"editVipForm.email"}})],1),t("el-form-item",{attrs:{label:"积分",prop:"mark"}},[t("el-input",{model:{value:e.editVipForm.mark,callback:function(t){e.$set(e.editVipForm,"mark",t)},expression:"editVipForm.mark"}})],1),t("el-form-item",{attrs:{label:"等级",prop:"level"}},[t("el-select",{attrs:{placeholder:"请选择等级"},model:{value:e.editVipForm.level,callback:function(t){e.$set(e.editVipForm,"level",t)},expression:"editVipForm.level"}},[t("el-option",{attrs:{label:"普通",value:"普通"}}),t("el-option",{attrs:{label:"VIP",value:"vip"}})],1)],1),t("el-form-item",{attrs:{label:"最后一次入住时间",prop:"latestCheckInTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.editVipForm.latestCheckInTime,callback:function(t){e.$set(e.editVipForm,"latestCheckInTime",t)},expression:"editVipForm.latestCheckInTime"}})],1),t("el-form-item",{attrs:{label:"最后一次预约时间",prop:"latestReserveTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.editVipForm.latestReserveTime,callback:function(t){e.$set(e.editVipForm,"latestReserveTime",t)},expression:"editVipForm.latestReserveTime"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.editVipForm.remark,callback:function(t){e.$set(e.editVipForm,"remark",t)},expression:"editVipForm.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editVipDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editVip}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"删除",visible:e.deletionDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.deletionDialogVisible=t}}},[t("span",[e._v("确定要删除该项目吗？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelDeleteDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"danger"},on:{click:e.deleteById}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"批量删除",visible:e.massDeletionDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.massDeletionDialogVisible=t}}},[t("span",[e._v("确定要批量删除选中的项目吗？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.massDeletionDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"danger"},on:{click:e.deleteByIds}},[e._v("确 定")])],1)])],1)},a=[],r=l(6265),o=l.n(r),s=l(8763),d={mounted(){o()({method:"post",url:s.Z.serverSrc+"/login/currentUser",headers:{"Content-Type":"text/plain"},data:window.sessionStorage.getItem("token")}).then((e=>{this.currentUserName=e.data.userName,this.currentUserType=e.data.userType,"管理员"!=this.currentUserType&&(alert(this.currentUserType+"没有此权限"),this.$router.push("/homePage"))})),this.getAllVips()},methods:{conditionQuery(){var e=!0;for(let l in this.searchForm)""!=this.searchForm[l]&&(e=!1);if(e)this.getAllVips();else{var t=this;o()({method:"post",url:s.Z.serverSrc+"/vips/search",headers:{"Content-Type":"application/json"},data:JSON.stringify(t.searchForm)}).then((e=>{t.tableData=e.data.data}))}},getAllVips(){var e=this;o().get(s.Z.serverSrc+"/vips").then((t=>{t.data.code==s.Z.GET_OK?e.tableData=t.data.data:alert(t.data.msg)}))},showEditDialog(e){var t=this;o().get(s.Z.serverSrc+"/vips/"+e).then((e=>{t.editVipForm=e.data.data})),this.editVipDialogVisible=!0},handleSelectionChange(e){this.multipleSelection=e},showDeleteDialog(e){this.deletionDialogVisible=!0,this.deleteId=e},cancelDeleteDialog(){this.deleteId=0,this.deletionDialogVisible=!1},deleteByIds(){for(var e=s.Z.serverSrc+"/vips/",t=0;t<this.multipleSelection.length;t++)t==this.multipleSelection.length-1?e+=this.multipleSelection[t].id:e=e+this.multipleSelection[t].id+",";o()["delete"](e).then((e=>{e.data.code==s.Z.DELETE_ERR&&alert("删除失败")})),this.deletionDialogVisible=!1,this.getAllVips(),window.location.reload()},deleteById(){var e=s.Z.serverSrc+"/vips/";e+=this.deleteId,o()["delete"](e).then((e=>{e.data.code==s.Z.DELETE_ERR&&alert("删除失败")})),this.getAllVips(),window.location.reload()},massDeletion(){this.deleteByIds(),this.massDeletionDialogVisible=!1},handleSizeChange(e){console.log(`每页 ${e} 条`)},handleCurrentChange(e){console.log(`当前页: ${e}`)},addVip(){this.$refs.addVipFormRef.validate((e=>{if(!e)return console.log("error submit!!"),!1;var t=this;o()({method:"post",url:s.Z.serverSrc+"/vips",headers:{"Content-Type":"application/json"},data:JSON.stringify(t.addVipForm)}).then((e=>{e.data.code==s.Z.SAVE_ERR&&alert("添加失败")})),t.getAllVips(),window.location.reload(),this.addVipDialogVisible=!1}))},editVip(){this.$refs.editVipFormRef.validate((e=>{if(!e)return console.log("error submit!!"),!1;var t=this;o()({method:"put",url:s.Z.serverSrc+"/vips",headers:{"Content-Type":"application/json"},data:JSON.stringify(t.editVipForm)}).then((e=>{e.data.code==s.Z.SAVE_ERR&&alert("添加失败")})),this.getAllVips(),window.location.reload(),this.editVipDialogVisible=!1}))}},data(){return{massDeletionDialogVisible:!1,deletionDialogVisible:!1,addVipDialogVisible:!1,addVipForm:{id:"",name:"",gender:"",password:"",phoneNumber:"",address:"",email:"",mark:"",level:"",latestCheckInTime:"",latestReserveTime:"",remark:""},editVipDialogVisible:!1,editVipForm:{id:"",name:"",gender:"",password:"",phoneNumber:"",address:"",email:"",mark:"",level:"",latestCheckInTime:"",latestReserveTime:"",remark:""},VipRules:{name:[{required:!0,message:"请输入会员名",trigger:"blur"}],gender:[{required:!0,message:"请输入性别",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],phoneNumber:[{required:!0,message:"请输入电话号码",trigger:"blur"}]},tableData:[],currentPage4:0,deleteId:0,multipleSelection:[],searchForm:{}}}},n=d,p=l(3736),m=(0,p.Z)(n,i,a,!1,null,null,null),c=m.exports},8763:function(e,t,l){l.d(t,{Z:function(){return v}});const i="http://localhost:8080",a=20011,r=20021,o=20031,s=20041,d=20010,n=20020,p=20030,m=20040;var c,u,b={serverSrc:i,SAVE_OK:a,DELETE_OK:r,UPDATE_OK:o,GET_OK:s,SAVE_ERR:d,DELETE_ERR:n,UPDATE_ERR:p,GET_ERR:m},h=b,V=l(3736),f=(0,V.Z)(h,c,u,!1,null,null,null),v=f.exports}}]);
//# sourceMappingURL=206.9f65c489.js.map