"use strict";(self["webpackChunkvue_hotel_management_project"]=self["webpackChunkvue_hotel_management_project"]||[]).push([[272],{8763:function(e,t,o){o.d(t,{Z:function(){return R}});const r="http://localhost:8080",a=20011,l=20021,i=20031,s=20041,n=20010,d=20020,m=20030,c=20040;var p,u,h={serverSrc:r,SAVE_OK:a,DELETE_OK:l,UPDATE_OK:i,GET_OK:s,SAVE_ERR:n,DELETE_ERR:d,UPDATE_ERR:m,GET_ERR:c},g=h,b=o(3736),f=(0,b.Z)(g,p,u,!1,null,null,null),R=f.exports},1272:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-breadcrumb",{staticStyle:{"font-size":"24px","margin-bottom":"12px"},attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[e._v("客房管理")]),t("el-breadcrumb-item",[e._v("客房信息管理")])],1),t("el-row",{staticStyle:{"margin-bottom":"12px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("el-input",{staticStyle:{"line-height":"36px"},attrs:{placeholder:"请输入客房编号"},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}})],1),t("el-col",{attrs:{span:4}},[t("el-input",{staticStyle:{"line-height":"36px"},attrs:{placeholder:"请输入客房类型"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}})],1),t("el-col",{attrs:{span:4}},[t("el-input",{staticStyle:{"line-height":"36px"},attrs:{placeholder:"请输入客房状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}})],1),t("el-col",{attrs:{span:4}},[t("el-input",{staticStyle:{"line-height":"36px"},attrs:{placeholder:"请输入楼层"},model:{value:e.searchForm.floor,callback:function(t){e.$set(e.searchForm,"floor",t)},expression:"searchForm.floor"}})],1),t("el-col",{attrs:{span:3}},[t("el-input",{staticStyle:{"line-height":"36px"},attrs:{placeholder:"请输入标准价格"},model:{value:e.searchForm.standardPrice,callback:function(t){e.$set(e.searchForm,"standardPrice",t)},expression:"searchForm.standardPrice"}})],1),t("el-col",{attrs:{span:1}},[t("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.conditionQuery}})],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addRoomDialogVisible=!0}}},[e._v("添加客房")])],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.massDeletionDialogVisible=!0}}},[e._v("批量删除")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"id",label:"编号"}}),t("el-table-column",{attrs:{prop:"type",label:"类型",width:"180"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"180"}}),t("el-table-column",{attrs:{prop:"floor",label:"楼层",width:"180"}}),t("el-table-column",{attrs:{prop:"standardPrice",label:"标准价格",width:"180"}}),t("el-table-column",{attrs:{prop:"discountPrice",label:"折扣价格",width:"180"}}),t("el-table-column",{attrs:{prop:"standardUserPrice",label:"普通会员价格",width:"180"}}),t("el-table-column",{attrs:{prop:"vipUserPrice",label:"尊贵会员价格",width:"180"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.showEditDialog(o.row.id)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.showDeleteDialog(o.row.id)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[2,10,20,50],"page-size":e.itemsOnOnePage,layout:"sizes, prev, pager, next",total:2*e.pages},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),t("el-dialog",{attrs:{title:"添加客房信息",visible:e.addRoomDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.addRoomDialogVisible=t}}},[t("el-form",{ref:"addRoomFormRef",attrs:{model:e.addRoomForm,rules:e.RoomRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"编号",prop:"id"}},[t("el-input",{model:{value:e.addRoomForm.id,callback:function(t){e.$set(e.addRoomForm,"id",t)},expression:"addRoomForm.id"}})],1),t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.addRoomForm.type,callback:function(t){e.$set(e.addRoomForm,"type",t)},expression:"addRoomForm.type"}},e._l(e.roomTypes,(function(e){return t("el-option",{key:e.id,attrs:{label:e.type,value:e.type}})})),1)],1),t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-input",{model:{value:e.addRoomForm.status,callback:function(t){e.$set(e.addRoomForm,"status",t)},expression:"addRoomForm.status"}})],1),t("el-form-item",{attrs:{label:"楼层",prop:"floor"}},[t("el-select",{attrs:{placeholder:"请选择楼层"},model:{value:e.addRoomForm.floor,callback:function(t){e.$set(e.addRoomForm,"floor",t)},expression:"addRoomForm.floor"}},e._l(e.floors,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),t("el-form-item",{attrs:{label:"标准价格",prop:"standardPrice"}},[t("el-input",{model:{value:e.addRoomForm.standardPrice,callback:function(t){e.$set(e.addRoomForm,"standardPrice",t)},expression:"addRoomForm.standardPrice"}})],1),t("el-form-item",{attrs:{label:"折扣价格",prop:"discountPrice"}},[t("el-input",{model:{value:e.addRoomForm.discountPrice,callback:function(t){e.$set(e.addRoomForm,"discountPrice",t)},expression:"addRoomForm.discountPrice"}})],1),t("el-form-item",{attrs:{label:"普通会员价格",prop:"standardUserPrice"}},[t("el-input",{model:{value:e.addRoomForm.standardUserPrice,callback:function(t){e.$set(e.addRoomForm,"standardUserPrice",t)},expression:"addRoomForm.standardUserPrice"}})],1),t("el-form-item",{attrs:{label:"尊贵会员价格",prop:"vipUserPrice"}},[t("el-input",{model:{value:e.addRoomForm.vipUserPrice,callback:function(t){e.$set(e.addRoomForm,"vipUserPrice",t)},expression:"addRoomForm.vipUserPrice"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.addRoomForm.remark,callback:function(t){e.$set(e.addRoomForm,"remark",t)},expression:"addRoomForm.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addRoomDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addRoom}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改客房信息",visible:e.editRoomDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.editRoomDialogVisible=t}}},[t("el-form",{ref:"editRoomFormRef",attrs:{model:e.editRoomForm,rules:e.RoomRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"编号",prop:"id"}},[t("el-input",{model:{value:e.editRoomForm.id,callback:function(t){e.$set(e.editRoomForm,"id",t)},expression:"editRoomForm.id"}})],1),t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.editRoomForm.type,callback:function(t){e.$set(e.editRoomForm,"type",t)},expression:"editRoomForm.type"}},[t("el-option",{attrs:{label:"单人间"}}),t("el-option",{attrs:{label:"双人间"}}),t("el-option",{attrs:{label:"钟点房"}}),t("el-option",{attrs:{label:"总统套房"}})],1)],1),t("el-form-item",{attrs:{label:"状态",prop:"status"}},[t("el-input",{model:{value:e.editRoomForm.status,callback:function(t){e.$set(e.editRoomForm,"status",t)},expression:"editRoomForm.status"}})],1),t("el-form-item",{attrs:{label:"楼层",prop:"floor"}},[t("el-select",{attrs:{placeholder:"请选择楼层"},model:{value:e.editRoomForm.floor,callback:function(t){e.$set(e.editRoomForm,"floor",t)},expression:"editRoomForm.floor"}},[t("el-option",{attrs:{label:"一楼",value:"firstFloor"}}),t("el-option",{attrs:{label:"二楼",value:"secondFloor"}}),t("el-option",{attrs:{label:"三楼",value:"thirdFloor"}})],1)],1),t("el-form-item",{attrs:{label:"标准价格",prop:"standardPrice"}},[t("el-input",{model:{value:e.editRoomForm.standardPrice,callback:function(t){e.$set(e.editRoomForm,"standardPrice",t)},expression:"editRoomForm.standardPrice"}})],1),t("el-form-item",{attrs:{label:"折扣价格",prop:"discountPrice"}},[t("el-input",{model:{value:e.editRoomForm.discountPrice,callback:function(t){e.$set(e.editRoomForm,"discountPrice",t)},expression:"editRoomForm.discountPrice"}})],1),t("el-form-item",{attrs:{label:"普通会员价格",prop:"standardUserPrice"}},[t("el-input",{model:{value:e.editRoomForm.standardUserPrice,callback:function(t){e.$set(e.editRoomForm,"standardUserPrice",t)},expression:"editRoomForm.standardUserPrice"}})],1),t("el-form-item",{attrs:{label:"尊贵会员价格",prop:"vipUserPrice"}},[t("el-input",{model:{value:e.editRoomForm.vipUserPrice,callback:function(t){e.$set(e.editRoomForm,"vipUserPrice",t)},expression:"editRoomForm.vipUserPrice"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.editRoomForm.remark,callback:function(t){e.$set(e.editRoomForm,"remark",t)},expression:"editRoomForm.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editRoomDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editRoom}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"删除",visible:e.deletionDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.deletionDialogVisible=t}}},[t("span",[e._v("确定要删除该项目吗？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelDeleteDialog}},[e._v("取 消")]),t("el-button",{attrs:{type:"danger"},on:{click:e.deleteById}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"批量删除",visible:e.massDeletionDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.massDeletionDialogVisible=t}}},[t("span",[e._v("确定要批量删除选中的项目吗？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.massDeletionDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"danger"},on:{click:e.deleteByIds}},[e._v("确 定")])],1)])],1)},a=[],l=o(6265),i=o.n(l),s=o(8763),n={mounted(){i()({method:"post",url:s.Z.serverSrc+"/login/currentUser",headers:{"Content-Type":"text/plain"},data:window.sessionStorage.getItem("token")}).then((e=>{this.currentUserName=e.data.userName,this.currentUserType=e.data.userType,"管理员"!=this.currentUserType&&(alert(this.currentUserType+"没有此权限"),this.$router.push("/homePage"))})),this.getTotalPages(),this.getAllfloors(),this.getAllRoomTypes()},methods:{getTotalPages(){var e=this;i().get(s.Z.serverSrc+"/rooms/totalPages/"+this.itemsOnOnePage).then((t=>{t.data.code==s.Z.GET_OK?(e.pages=t.data.data,this.getAllRooms()):alert(t.data.msg)}))},conditionQuery(){var e=!0;for(let o in this.searchForm)""!=this.searchForm[o]&&(e=!1);if(e)this.getAllRooms();else{var t=this;i()({method:"post",url:s.Z.serverSrc+"/rooms/search",headers:{"Content-Type":"application/json"},data:JSON.stringify(t.searchForm)}).then((e=>{t.tableData=e.data.data}))}},getAllfloors(){var e=this;i().get(s.Z.serverSrc+"/floors").then((t=>{t.data.code==s.Z.GET_OK?e.floors=t.data.data:alert(t.data.msg)}))},getAllRoomTypes(){var e=this;i().get(s.Z.serverSrc+"/roomTypes").then((t=>{t.data.code==s.Z.GET_OK?e.roomTypes=t.data.data:alert(t.data.msg)}))},getAllRooms(){var e=this;i().get(s.Z.serverSrc+"/rooms/"+e.currentPage+"/"+e.itemsOnOnePage).then((t=>{t.data.code==s.Z.GET_OK?e.tableData=t.data.data:alert(t.data.msg)}))},showEditDialog(e){var t=this;i().get(s.Z.serverSrc+"/rooms/"+e).then((e=>{t.editRoomForm=e.data.data})),this.editRoomDialogVisible=!0},handleSelectionChange(e){this.multipleSelection=e},showDeleteDialog(e){this.deletionDialogVisible=!0,this.deleteId=e},cancelDeleteDialog(){this.deleteId=0,this.deletionDialogVisible=!1},deleteByIds(){for(var e=s.Z.serverSrc+"/rooms/",t=0;t<this.multipleSelection.length;t++)t==this.multipleSelection.length-1?e+=this.multipleSelection[t].id:e=e+this.multipleSelection[t].id+",";i()["delete"](e).then((e=>{e.data.code==s.Z.DELETE_ERR&&alert("删除失败")})),this.deletionDialogVisible=!1,this.getAllRooms(),window.location.reload()},deleteById(){var e=s.Z.serverSrc+"/rooms/";e+=this.deleteId,i()["delete"](e).then((e=>{e.data.code==s.Z.DELETE_ERR&&alert("删除失败")})),this.getAllRooms(),window.location.reload()},massDeletion(){this.deleteByIds(),this.massDeletionDialogVisible=!1},handleCurrentChange(e){this.currentPage=e},handleSizeChange(e){this.itemsOnOnePage=e,this.getTotalPages()},addRoom(){this.$refs.addRoomFormRef.validate((e=>{if(!e)return console.log(this.addRoomForm),console.log("error submit!!"),!1;var t=this;i()({method:"post",url:s.Z.serverSrc+"/rooms",headers:{"Content-Type":"application/json"},data:JSON.stringify(t.addRoomForm)}).then((e=>{e.data.code==s.Z.SAVE_ERR&&alert("添加失败")})),t.getAllRooms(),window.location.reload(),this.addRoomDialogVisible=!1}))},editRoom(){this.$refs.editRoomFormRef.validate((e=>{if(!e)return console.log("error submit!!"),!1;var t=this;i()({method:"put",url:s.Z.serverSrc+"/rooms",headers:{"Content-Type":"application/json"},data:JSON.stringify(t.editRoomForm)}).then((e=>{e.data.code==s.Z.SAVE_ERR&&alert("添加失败")})),this.getAllRooms(),window.location.reload(),this.editRoomDialogVisible=!1}))}},data(){return{massDeletionDialogVisible:!1,deletionDialogVisible:!1,addRoomDialogVisible:!1,addRoomForm:{id:"",type:"",status:"",floor:"",standardPrice:"",discountPrice:"",standardUserPrice:"",vipUserPrice:"",remark:""},editRoomDialogVisible:!1,editRoomForm:{id:"",type:"",status:"",floor:"",standardPrice:"",discountPrice:"",standardUserPrice:"",vipUserPrice:"",remark:""},RoomRules:{id:[{required:!0,message:"请输入编号",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],status:[{required:!0,message:"请输入状态",trigger:"change"}],floor:[{required:!0,message:"请选择楼层",trigger:"change"}],standardPrice:[{required:!0,message:"请输入标准价格",trigger:"blur"}],discountPrice:[{required:!0,message:"请输入折扣价格",trigger:"blur"}],standardUserPrice:[{required:!0,message:"请输入标准会员价格",trigger:"blur"}],vipUserPrice:[{required:!0,message:"请输入尊贵会员价格",trigger:"blur"}]},tableData:[],input:"",currentPage4:0,deleteId:0,multipleSelection:[],roomTypes:[],floors:[],searchForm:{},itemsOnOnePage:2,pages:20,currentPage:1}},watch:{currentPage:{handler(e){this.getAllRooms()}}}},d=n,m=o(3736),c=(0,m.Z)(d,r,a,!1,null,"42d273b2",null),p=c.exports}}]);
//# sourceMappingURL=272.b913ce0f.js.map